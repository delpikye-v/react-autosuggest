!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("joinclass")):"function"==typeof define&&define.amd?define(["exports","react","joinclass"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).ReactAutosuggest={},e.React,e.joinclass)}(this,(function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=r(t),a=r(n);function u(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(function(e){return(+e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>+e/4).toString(16)}))}function c(e,t){return!(!e||0===e.length)&&(i(e),t.current>=e.length&&(t.current=0),t.current<0&&(t.current=e.length-1),e[t.current].classList.add("autosuggest2-active"),!0)}function i(e){for(var t=0;t<e.length;t++)e[t].classList.remove("autosuggest2-active")}function l(e){return window.event?e.keyCode:e.which?e.which:void 0}function s(e){return null==e}function d(e,t,n){return n?"".concat(e).includes(t):"".concat(e).toLocaleLowerCase().includes(t.toLocaleLowerCase())}function f(e,n,r){void 0===r&&(r=window);var o=t.useRef();t.useEffect((function(){o.current=n}),[n]),t.useEffect((function(){if(r&&r.addEventListener){var t=function(e){return o.current(e)};return r.addEventListener(e,t),function(){r.removeEventListener(e,t)}}}),[e,r])}var v=function(e,n){t.useEffect((function(){var t=function(t){var r=t.target;r&&r.isConnected&&((Array.isArray(e)?e.filter((function(e){return Boolean(e.current)})).every((function(e){return e.current&&!e.current.contains(r)})):e.current&&!e.current.contains(r))&&n(t))};return document.addEventListener("mousedown",t),document.addEventListener("touchstart",t),function(){document.removeEventListener("mousedown",t),document.removeEventListener("touchstart",t)}}),[e,n])},g=function(e){var t=e.stroke,n=void 0===t?"#9E9E9E":t;return o.default.createElement("svg",{version:"1.1",id:"loader-1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 50 50",xmlSpace:"preserve"},o.default.createElement("circle",{cx:"25",cy:"25",r:"16.7",stroke:n,strokeWidth:"4px",fill:"none",opacity:"0.4"}),o.default.createElement("path",{fill:n,d:"M43.7,25c0-10.318-8.364-18.683-18.683-18.683c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615c8.072,0,14.615,6.543,14.615,14.615H43.7z"},o.default.createElement("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 25 25",to:"360 25 25",dur:"0.6s",repeatCount:"indefinite"})))},m=function(e){var t=e.stroke,n=void 0===t?"#9E9E9E":t;return o.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},o.default.createElement("g",{fill:"none",fillRule:"evenodd"},o.default.createElement("path",{d:"M32 0H0v32h32V0z"}),o.default.createElement("path",{stroke:n,strokeLinecap:"square",strokeWidth:"2",d:"M10 22l12-12M22 22L10 10"})))},h=function(){return o.default.createElement("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.default.createElement("path",{d:"M12.5 11H11.71L11.43 10.73C12.41 9.59 13 8.11 13 6.5C13 2.91 10.09 0 6.5 0C2.91 0 0 2.91 0 6.5C0 10.09 2.91 13 6.5 13C8.11 13 9.59 12.41 10.73 11.43L11 11.71V12.5L16 17.49L17.49 16L12.5 11ZM6.5 11C4.01 11 2 8.99 2 6.5C2 4.01 4.01 2 6.5 2C8.99 2 11 4.01 11 6.5C11 8.99 8.99 11 6.5 11Z",fill:"#9E9E9E"}))},p=function(){return p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},p.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;e.CloseIcon=m,e.LoadingIcon=g,e.SearchIcon=h,e.default=function(e){var n=e.id,r=e.displayName,i=void 0===r?"":r,E=e.valueName,y=void 0===E?"":E,x=e.className,w=e.listSuggest,C=void 0===w?[]:w,L=e.placeholder,k=void 0===L?"Please enter the name":L,S=e.messageNoData,b=void 0===S?"":S,T=e.maxLength,N=e.text,_=void 0===N?"":N,O=e.closeOnSelected,j=void 0===O||O,A=e.closeOnEsc,B=void 0!==A&&A,I=e.matchCompareCase,R=void 0===I||I,M=e.disabled,V=void 0!==M&&M,q=e.minSizeSearch,z=void 0===q?1:q,H=e.hideSearchIcon,P=void 0!==H&&H,D=e.titleSearchIcon,W=void 0===D?"":D,Z=e.titleClearIcon,F=void 0===Z?"":Z,J=e.getInputRefs,K=void 0===J?function(e){}:J,U=e.isLoading,X=void 0!==U&&U,G=e.hasAsync,Q=void 0!==G&&G,Y=e.setText,$=void 0===Y?function(e){}:Y,ee=e.handleSelection,te=void 0===ee?function(e){}:ee,ne=e.handleOutSideClick,re=void 0===ne?function(){}:ne,oe=e.handleIconSearchClick,ae=void 0===oe?function(){}:oe,ue=t.useRef(-1),ce=t.useRef(null),ie=t.useRef(null),le=t.useState(!1),se=le[0],de=le[1],fe=t.useState(!1),ve=fe[0],ge=fe[1],me=t.useState("dk-sugggest-".concat(n||u()))[0],he=t.useState({localText:_,localValue:""}),pe=he[0],Ee=he[1],ye=z>0?z:1,xe="".concat(pe.localText).trim().length,we=xe>=ye&&!V,Ce=ve&&!X&&we,Le=Boolean(i)&&Boolean(y),ke=function(){var e="".concat(pe.localText).trim(),t=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([],C,!0);Le||(t=t.map((function(e){return JSON.stringify(e)})));if(Q||0===e.length)return t;if(!Le)return t.filter((function(t){return d(t,e,R)}));return t.filter((function(t){return d(t[i],e,R)}))}();t.useEffect((function(){X||de(!1)}),[X]),v(ie,(function(){Ce&&(re(),ue.current=-1,ge(!1))})),f("keydown",(function(e){var t=l(e);if(B&&27===t)return ue.current=-1,void ge(!1);var n=document.getElementById("".concat(me,"-autosuggest2-list")),r=[];if(n&&(r=n.getElementsByTagName("div")),[40,39].includes(t))return ue.current++,void c(r,ue);if([38,37].includes(t))return ue.current--,void c(r,ue);if([13].includes(t)){if(e.preventDefault(),1===r.length)return void r[0].click();ue.current>-1&&r.length>0&&r[ue.current].click()}}),ce.current);var Se=function(e){if(ue.current=-1,!Le){"object"==typeof e&&(e=e.localText||e[i]);var t=s(e)?"":e;return Ee(p(p({},pe),{localText:t})),void $(t)}$(e.localText),Ee(e)};return o.default.createElement("div",{"data-testid":"autosuggest2",role:"search",ref:ie,className:a.default("autosuggest2",P&&"autosuggest2-icon-search-hidden",V&&"autosuggest2_disabled",x)},!P&&o.default.createElement("div",{"data-testid":"autosuggest2_loading",className:a.default("autosuggest2_loading",we&&!V&&"autosuggest2-search-icon__active",X&&"autosuggest2-search-icon__busy"),title:W,onClick:function(){X||(ge(!0),ae())}},Q&&X&&we?o.default.createElement(g,null):o.default.createElement(h,null)),o.default.createElement("input",{"data-testid":"autosuggest2_search",role:"searchbox",ref:function(e){e&&(ce.current=e,K(ce))},id:me,className:"autosuggest2_searchbox",value:pe.localText,maxLength:T,disabled:V,autoComplete:"off",type:"text",placeholder:k,onChange:function(e){var t=Boolean(e.target.value);t||te(null),ge(t),$(e.target.value),Se(p(p({},pe),{localText:e.target.value})),de(!0)},onFocus:function(){return ge(C.length>0)}}),xe>0&&o.default.createElement("div",{"data-testid":"autosuggest2_clear",className:"autosuggest2_clear",title:F,onClick:function(){ce.current.focus(),Se(p(p({},pe),{localText:""})),$(""),te(null),de(!1)}},o.default.createElement(m,null)),Ce&&o.default.createElement("div",{role:"list",id:"".concat(me,"-autosuggest2-list"),className:"autosuggest2-items"},ke.length>0?ke.map((function(e,t){return o.default.createElement("div",{key:"".concat(me,"-").concat(t),role:"listitem",onClick:function(){return function(e){Se(Le?{localText:e[i],localValue:e[y]}:e),te(e),ge(!j)}(e)},"aria-hidden":"true"},Le?e[i]:e)})):b&&!X&&!se&&o.default.createElement("div",{className:"autosuggest2-items-empty"},b)))},e.getKeyCode=l,e.isMatchingValue=d,e.isNil=s,e.removeActiveSelection=i,e.setActiveSelection=c,e.useEventListener=f,e.useOnClickOutside=v,e.uuidv4=u,Object.defineProperty(e,"__esModule",{value:!0})}));
