import e,{useRef as t,useEffect as n,useState as r}from"react";import o from"joinclass";function a(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(function(e){return(+e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>+e/4).toString(16)}))}function c(e,t){return!(!e||0===e.length)&&(i(e),t.current>=e.length&&(t.current=0),t.current<0&&(t.current=e.length-1),e[t.current].classList.add("autosuggest2-active"),!0)}function i(e){for(var t=0;t<e.length;t++)e[t].classList.remove("autosuggest2-active")}function u(e){return window.event?e.keyCode:e.which?e.which:void 0}function l(e){return null==e}function s(e,t,n){return n?"".concat(e).includes(t):"".concat(e).toLocaleLowerCase().includes(t.toLocaleLowerCase())}function d(e,r,o){void 0===o&&(o=window);var a=t();n((function(){a.current=r}),[r]),n((function(){if(o&&o.addEventListener){var t=function(e){return a.current(e)};return o.addEventListener(e,t),function(){o.removeEventListener(e,t)}}}),[e,o])}var v=function(e,t){n((function(){var n=function(n){var r=n.target;r&&r.isConnected&&((Array.isArray(e)?e.filter((function(e){return Boolean(e.current)})).every((function(e){return e.current&&!e.current.contains(r)})):e.current&&!e.current.contains(r))&&t(n))};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),function(){document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}}),[e,t])},f=function(t){var n=t.stroke,r=void 0===n?"#9E9E9E":n;return e.createElement("svg",{version:"1.1",id:"loader-1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 50 50",xmlSpace:"preserve"},e.createElement("circle",{cx:"25",cy:"25",r:"16.7",stroke:r,strokeWidth:"4px",fill:"none",opacity:"0.4"}),e.createElement("path",{fill:r,d:"M43.7,25c0-10.318-8.364-18.683-18.683-18.683c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615c8.072,0,14.615,6.543,14.615,14.615H43.7z"},e.createElement("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 25 25",to:"360 25 25",dur:"0.6s",repeatCount:"indefinite"})))},g=function(t){var n=t.stroke,r=void 0===n?"#9E9E9E":n;return e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},e.createElement("g",{fill:"none",fillRule:"evenodd"},e.createElement("path",{d:"M32 0H0v32h32V0z"}),e.createElement("path",{stroke:r,strokeLinecap:"square",strokeWidth:"2",d:"M10 22l12-12M22 22L10 10"})))},m=function(){return e.createElement("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M12.5 11H11.71L11.43 10.73C12.41 9.59 13 8.11 13 6.5C13 2.91 10.09 0 6.5 0C2.91 0 0 2.91 0 6.5C0 10.09 2.91 13 6.5 13C8.11 13 9.59 12.41 10.73 11.43L11 11.71V12.5L16 17.49L17.49 16L12.5 11ZM6.5 11C4.01 11 2 8.99 2 6.5C2 4.01 4.01 2 6.5 2C8.99 2 11 4.01 11 6.5C11 8.99 8.99 11 6.5 11Z",fill:"#9E9E9E"}))},h=function(){return h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},h.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var p=function(i){var p=i.id,E=i.displayName,w=void 0===E?"":E,x=i.valueName,y=void 0===x?"":x,C=i.className,L=i.listSuggest,k=void 0===L?[]:L,S=i.placeholder,T=void 0===S?"Please enter the name":S,N=i.messageNoData,b=void 0===N?"":N,_=i.maxLength,B=i.text,O=void 0===B?"":B,A=i.closeOnSelected,I=void 0===A||A,M=i.closeOnEsc,V=void 0!==M&&M,j=i.matchCompareCase,z=void 0===j||j,H=i.disabled,R=void 0!==H&&H,D=i.minSizeSearch,P=void 0===D?1:D,W=i.hideSearchIcon,Z=void 0!==W&&W,q=i.titleSearchIcon,F=void 0===q?"":q,J=i.titleClearIcon,U=void 0===J?"":J,X=i.getInputRefs,G=void 0===X?function(e){}:X,K=i.isLoading,Q=void 0!==K&&K,Y=i.hasAsync,$=void 0!==Y&&Y,ee=i.setText,te=void 0===ee?function(e){}:ee,ne=i.handleSelection,re=void 0===ne?function(e){}:ne,oe=i.handleOutSideClick,ae=void 0===oe?function(){}:oe,ce=i.handleIconSearchClick,ie=void 0===ce?function(){}:ce,ue=t(-1),le=t(null),se=t(null),de=r(!1),ve=de[0],fe=de[1],ge=r(!1),me=ge[0],he=ge[1],pe=r("dk-sugggest-".concat(p||a()))[0],Ee=r({localText:O,localValue:""}),we=Ee[0],xe=Ee[1],ye=P>0?P:1,Ce="".concat(we.localText).trim().length,Le=Ce>=ye&&!R,ke=me&&!Q&&Le,Se=Boolean(w)&&Boolean(y),Te=function(){var e="".concat(we.localText).trim(),t=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([],k,!0);Se||(t=t.map((function(e){return JSON.stringify(e)})));if($||0===e.length)return t;if(!Se)return t.filter((function(t){return s(t,e,z)}));return t.filter((function(t){return s(t[w],e,z)}))}();n((function(){Q||fe(!1)}),[Q]),v(se,(function(){ke&&(ae(),ue.current=-1,he(!1))})),d("keydown",(function(e){var t=u(e);if(V&&27===t)return ue.current=-1,void he(!1);var n=document.getElementById("".concat(pe,"-autosuggest2-list")),r=[];if(n&&(r=n.getElementsByTagName("div")),[40,39].includes(t))return ue.current++,void c(r,ue);if([38,37].includes(t))return ue.current--,void c(r,ue);if([13].includes(t)){if(e.preventDefault(),1===r.length)return void r[0].click();ue.current>-1&&r.length>0&&r[ue.current].click()}}),le.current);var Ne=function(e){if(ue.current=-1,!Se){"object"==typeof e&&(e=e.localText||e[w]);var t=l(e)?"":e;return xe(h(h({},we),{localText:t})),void te(t)}te(e.localText),xe(e)};return e.createElement("div",{"data-testid":"autosuggest2",role:"search",ref:se,className:o("autosuggest2",Z&&"autosuggest2-icon-search-hidden",R&&"autosuggest2_disabled",C)},!Z&&e.createElement("div",{"data-testid":"autosuggest2_loading",className:o("autosuggest2_loading",Le&&!R&&"autosuggest2-search-icon__active",Q&&"autosuggest2-search-icon__busy"),title:F,onClick:function(){Q||(he(!0),ie())}},$&&Q&&Le?e.createElement(f,null):e.createElement(m,null)),e.createElement("input",{"data-testid":"autosuggest2_search",role:"searchbox",ref:function(e){e&&(le.current=e,G(le))},id:pe,className:"autosuggest2_searchbox",value:we.localText,maxLength:_,disabled:R,autoComplete:"off",type:"text",placeholder:T,onChange:function(e){var t=Boolean(e.target.value);t||re(null),he(t),te(e.target.value),Ne(h(h({},we),{localText:e.target.value})),fe(!0)},onFocus:function(){return he(k.length>0)}}),Ce>0&&e.createElement("div",{"data-testid":"autosuggest2_clear",className:"autosuggest2_clear",title:U,onClick:function(){le.current.focus(),Ne(h(h({},we),{localText:""})),te(""),re(null),fe(!1)}},e.createElement(g,null)),ke&&e.createElement("div",{role:"list",id:"".concat(pe,"-autosuggest2-list"),className:"autosuggest2-items"},Te.length>0?Te.map((function(t,n){return e.createElement("div",{key:"".concat(pe,"-").concat(n),role:"listitem",onClick:function(){return function(e){Ne(Se?{localText:e[w],localValue:e[y]}:e),re(e),he(!I)}(t)},"aria-hidden":"true"},Se?t[w]:t)})):b&&!Q&&!ve&&e.createElement("div",{className:"autosuggest2-items-empty"},b)))};export{g as CloseIcon,f as LoadingIcon,m as SearchIcon,p as default,u as getKeyCode,s as isMatchingValue,l as isNil,i as removeActiveSelection,c as setActiveSelection,d as useEventListener,v as useOnClickOutside,a as uuidv4};
